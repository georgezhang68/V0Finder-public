PACK:sqlite##sqlite
CLONE:git clone https://github.com/sqlite/sqlite.git
URL:https://github.com/sqlite/sqlite/commit/a6c1a71cde082e09750465d5675699062922e387

diff --git a/src/select.c b/src/select.c
index 5afd6b76ce..6298e331f8 100644
--- a/src/select.c
+++ b/src/select.c
@@ -4978,7 +4978,7 @@ static int selectExpander(Walker *pWalker, Select *p){
 
   /* Process NATURAL keywords, and ON and USING clauses of joins.
   */
-  if( db->mallocFailed || sqliteProcessJoin(pParse, p) ){
+  if( pParse->nErr || db->mallocFailed || sqliteProcessJoin(pParse, p) ){
     return WRC_Abort;
   }
 

