+    static int	depth = 0;	    // call depth
+    // one recursion level deeper
+    ++depth;
+
+    if (depth == 50)
+    {
+	// Somehow got into a loop recursively calling getcmdline(), bail out.
+	emsg(_(e_command_too_recursive));
+	goto theend;
+    }
+
+	--depth;
