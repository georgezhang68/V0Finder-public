+compile_nested_function(exarg_T *eap, cctx_T *cctx, garray_T *lines_to_free)
+    ufunc = define_function(eap, lambda_name, lines_to_free);
+    garray_T	lines_to_free;
+    // allocated lines are freed at the end
+    ga_init2(&lines_to_free, sizeof(char_u *), 50);
+
+		if (ga_add_string(&lines_to_free, line) == FAIL)
+		    goto erret;
+		    line = compile_nested_function(&ea, &cctx, &lines_to_free);
+    ga_clear_strings(&lines_to_free);
